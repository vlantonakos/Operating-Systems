![image](https://github.com/vlantonakos/Operating-Systems/assets/107072477/865a1809-8e76-4c08-b09e-a651aa969155)

A. Όταν ο υπολογιστής δεν διαθέτει την εντολή TSL αλλά διαθέτει μια εντολή για ανταλλαγή περιεχομένων μεταξύ καταχωρητή και μνήμης, μπορούμε να χρησιμοποιήσουμε αυτήν την εντολή για την υλοποίηση της ρουτίνας enter. Αντί να χρησιμοποιήσουμε την TSL εντολή για τον έλεγχο και την επίλυση των συγκρούσεων, μπορούμε να χρησιμοποιήσουμε την εντολή ανταλλαγής περιεχομένων μεταξύ ενός καταχωρητή και μιας θέσης μνήμης.

Η τροποποιημένη ρουτίνα enter με τη χρήση της εντολής ανταλλαγής είναι η εξής:

enter:
EXCHANGE REGISTER, MEMORY
CMP REGISTER, #0
JNE, enter
RET

Σε αυτήν τη ρουτίνα, η εντολή EXCHANGE χρησιμοποιείται για την ανταλλαγή των περιεχομένων του καταχωρητή REGISTER με τα περιεχόμενα της θέσης μνήμης MEMORY. Στη συνέχεια, γίνεται ο έλεγχος του REGISTER, και αν δεν είναι μηδέν, επαναλαμβάνεται η ρουτίνα enter μέχρι να γίνει διαθέσιμη η κρίσιμη περιοχή.

B. Ο παρακάτω είναι ο ψευδοκώδικας των διεργασιών που γράφουν σε ένα random access αρχείο χρησιμοποιώντας binary semaphores:

Δηλώσεις:
binary_semaphore mutex = 1; // για τον έλεγχο της πρόσβασης στο αρχείο

Κώδικας της κάθε διεργασίας:
wait(mutex); // αίτημα κράτησης του semaphore

// Κώδικας για την εγγραφή στο αρχείο
// Εδώ μπορείτε να γράψετε τον κώδικα που εκτελεί την εγγραφή στο επόμενο διαθέσιμο record του αρχείου.

signal(mutex); // απελευθέρωση του semaphore

Η wait(mutex) καλεί τη διαδικασία να περιμένει (block) αν το mutex έχει τιμή 0 (δηλώνοντας ότι η πρόσβαση στο αρχείο είναι κλειδωμένη). Όταν η πρόσβαση είναι διαθέσιμη (mutex = 1), η διαδικασία προχωρά στον κώδικα εγγραφής στο αρχείο. Αφού ολοκληρώσει την εγγραφή, καλεί τη signal(mutex) για να απελευθερώσει το mutex, επιτρέποντας σε άλλες διεργασίες να προσπελάσουν το αρχείο.

Πρέπει να εξασφαλίζετε ότι μόνο μία διεργασία μπορεί να έχει πρόσβαση στο αρχείο κάθε φορά, χρησιμοποιώντας το binary semaphore για τον συγχρονισμό της πρόσβασης.
